@using la_mia_pizzeria_static.Models

@{
    Layout = "Guest/_Layout";
}
@model List<Pizza>;


<div class="container list-container pizza-container">

    <div class="d-flex justify-content-between align-items-center px-5">
        <h2 class="mb-3">Menu pizze</h2>       
    </div>

    <div class="no-result p-3">
        <h4>Non ci sono Pizze al momento</h4>
    </div>

    <div class="result row">
        <h4>Elenco pizze</h4>
       
    </div>
 @*   <div class="result row">
        @if (@Model.Count() != 0)
        {

            @foreach (Pizza pizza in Model)
            {
                <div class="col-12 col-lg-6 debug border-r py-3 mb-3 bg-card">

                  <div class="container-fluid px-0">
                    <div class="row">

                      <div class="col-6">
                                <img class="border-r w-100" src="@pizza.Image" alt="@pizza.Name">
                      </div>
                      <div class="col-6 d-flex flex-column justify-content-center">

                        <div class="text">
                          <h3>@pizza.Name</h3>
                          <h6 class="mb-0">Categoria: Pizze @pizza.Category.Name</h6>
                          <h6 class="mb-0">Euro: @pizza.Price</h6>
                          <h6>Ingredienti: </h6>
                          @foreach (Ingredient ing in pizza.Ingredients){
                             <p class="d-inline">@ing.Name </p>
                          }
                          ;
                        </div>
                      </div>
                        <div class="btn-box d-flex justify-content-end mt-2">
                          <a class="btn_show px-3 py-2 rounded-pill" href="">Acquista</a>            
                        </div>
                    </div>
                  </div>

                </div>
            }

        }
        else
        {
            <div class="pt-3">
              <h3>Non ci sono risultati</h3>
            </div>
        }
    </div>*@
</div>


    <script type="text/javascript">
        
        document.querySelector('.no-result').classList.add('d-none');

        axios.get('/api/pizza/get')
            .then(res =>{
                console.log("ciao", res.data);

                if(res.data.length == 0){
                console.log("pizze == 0");

                    document.querySelector('.no-result').classList.remove('d-none');
                    document.querySelector('.result').classList.add('d-none');

                }else{

                console.log(res.data);
                res.data.forEach(pizza => {

                document.querySelector('.result').innerHTML +=
                    `<div class="col-12 col-lg-6 debug border-r py-3 mb-3 bg-card">
                        <div class="container-fluid px-0">
                            <div class="row">
                                <div class="col-6">
                                    <img class="border-r w-100" src="${pizza.image}" alt="${pizza.name}">
                                </div>
                                <div class="col-6 d-flex flex-column justify-content-center">
                                    <div class="text">
                                        <h3>ciao</h3>
                                        <h6 class="mb-0">Categoria: Pizze ${pizza.name}</h6>
                                        <h6 class="mb-0">Euro: ${pizza.price}</h6>
                                        <h6>Ingredienti: Stamperò gli ingredienti </h6>                         
                                    </div>
                                </div>
                                <div class="btn-box d-flex justify-content-end mt-2">
                                    <a class="btn_show px-3 py-2 rounded-pill" href="">Acquista</a>            
                                </div>
                            </div>
                        </div>
                    </div>
                        
                    `;
            });
                }
            })
            .catch(err=>{
                console.log(err);
                document.querySelector('.result').innerHTML +=
                `
                 <div class="p-3">
                    <h4>${err.message}</h4>
                </div>
                `

            })
    </script>




